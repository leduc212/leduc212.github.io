:root{--bg: #0e0f14;--panel: #171922;--ink: #e8ecf2;--muted: #9aa8b8;--tile: #1d2130;--tile2: #212536;--tile3: #252a3c;--accent: #77c1ff;--ok: #52d49a;--warn: #ffbb6b;--danger: #ff6b6b;--clue: #7bd1ff;--flag: #ff5e94;--bomb: #ff4b6e;--flagDigit: #ff6b6b;--bombHL: #ff7bd1;--district: #6f76a8;--mark: #ffd24d;--markDigit: #ffe48b;--bgGradient: linear-gradient(180deg, #0b0c12, #11131a);--boardBg: #0008;--statusBg: #0b1222cc;--gutBg: #0b1222cc;--cfgItemBg: #141822;--kvBg: #0d1220;--enteredBg1: #3a4b62;--enteredBg2: #465162;--enteredWrongBg1: #4b3238;--enteredWrongBg2: #35252a;--givenBg1: #2b3044;--givenBg2: #23283b;--bombRevealedBg1: #311a22;--bombRevealedBg2: #2a1a1f}:root[data-theme=light]{--bg: #f5ede0;--panel: #fff8ef;--ink: #241a12;--muted: #7a6a55;--tile: #f3e3cd;--tile2: #ecd6bd;--tile3: #e2c8aa;--accent: #d38c3a;--ok: #1a7f4b;--warn: #d97706;--danger: #b91c1c;--clue: #2563eb;--flag: #e11d48;--bomb: #b91c1c;--flagDigit: #7f1d1d;--bombHL: #f97316;--district: #d1b38c;--mark: #facc15;--markDigit: #b45309;--bgGradient: linear-gradient(180deg, #f9f1e3, #ebdecc);--boardBg: rgba(0, 0, 0, .06);--statusBg: rgba(255, 255, 255, .9);--gutBg: rgba(255, 255, 255, .9);--cfgItemBg: #f3e6d3;--kvBg: #f2e7d7;--enteredBg1: #f7e0b8;--enteredBg2: #f0cf92;--enteredWrongBg1: #f6b5a0;--enteredWrongBg2: #f08c7a;--givenBg1: #f4e3c6;--givenBg2: #ebd3a9;--bombRevealedBg1: #f8cbc5;--bombRevealedBg2: #f3a39a}*{box-sizing:border-box}body{margin:0;background:var(--bgGradient);color:var(--ink);font:14px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;display:flex;flex-direction:column;align-items:center;gap:16px;padding:18px}.topbar{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:12px;width:min(96vw,980px)}.lives{display:flex;gap:6px;align-items:center}.heart{width:16px;aspect-ratio:1;background:var(--danger);clip-path:path("M12 21s-8-4.438-8-11a5 5 0 0 1 9-3 5 5 0 0 1 9 3c0 6.562-8 11-8 11Z");opacity:.18}.heart.on{opacity:1}.stats{justify-self:center;color:var(--muted);font-weight:600}.controls{justify-self:end;display:flex;gap:8px;flex-wrap:wrap}select,button{background:var(--panel);color:var(--ink);border:1px solid #0008;border-radius:10px;padding:8px 12px;font-weight:700;letter-spacing:.2px;cursor:pointer;box-shadow:inset 0 0 0 1px #ffffff0a,0 1px #000a}.theme-toggle{padding-inline:10px;border-radius:999px;font-size:14px}:root[data-theme=light] .theme-toggle{box-shadow:inset 0 0 0 1px #00000010,0 1px #0001}button:hover{filter:brightness(1.06)}button:active{transform:translateY(1px)}button[disabled]{opacity:.5;cursor:not-allowed}.layout{display:grid;grid-template-columns:minmax(300px,650px) minmax(220px,340px);gap:14px;width:min(96vw,980px)}.status{grid-column:1 / -1;border:1px solid #0008;border-radius:10px;padding:10px 12px;color:var(--muted);font-weight:800;box-shadow:0 6px 24px #0008,inset 0 0 0 1px #ffffff12;background:var(--statusBg)}.status.win{color:var(--ok)}.status.lose{color:var(--danger)}.status.hint{color:var(--clue)}.boardWrap{position:relative;width:100%;aspect-ratio:1;margin:0;padding-top:40px;padding-left:56px}.board{width:100%;aspect-ratio:1;display:grid;grid-template-columns:repeat(9,1fr);grid-template-rows:repeat(9,1fr);gap:2px;background:var(--boardBg);padding:2px;border-radius:14px;border:4px solid var(--district);box-shadow:0 0 12px #6f76a830}.cell{position:relative;display:flex;align-items:center;justify-content:center;background:var(--tile);border-radius:8px;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;font-size:clamp(16px,3vw,26px);font-weight:900;color:var(--ink);transition:.08s background,.08s transform,.08s color,.08s box-shadow;border-right:0;border-bottom:0}.cell.bRight{border-right:4px solid var(--district)}.cell.bBottom{border-bottom:4px solid var(--district)}.cell.covered{background:var(--tile2);cursor:pointer}.cell.revealed{background:var(--tile3)}.cell.normal.revealed{outline:1px solid #0006}.cell.clue.revealed{color:var(--clue);outline:2px solid #3a7aa6aa;box-shadow:inset 0 0 0 1px #6fc8ff33,0 0 6px #6fc8ff33}.cell.bomb.revealed{background:linear-gradient(180deg,var(--bombRevealedBg1),var(--bombRevealedBg2));outline:2px solid #ff4b6e80}.bombmark{position:absolute;font-size:20px}.cell.given{box-shadow:inset 0 0 0 2px #ffffff12;background:linear-gradient(180deg,var(--givenBg1),var(--givenBg2))}.subgrid{position:absolute;inset:-2px;border-radius:10px;pointer-events:none;outline:2px solid #ffffff08;box-shadow:inset 0 0 0 2px #0004}.cell.flag:before{content:"âš‘";position:absolute;left:6px;top:5px;color:var(--flag);font-size:14px}.flagDigit{position:relative;z-index:1;color:var(--flagDigit);font-weight:900;font-size:clamp(16px,3vw,26px);text-shadow:0 1px 0 #0009}.markModeOn{background:linear-gradient(180deg,#d9ae34,#8c6f14);outline:2px solid var(--mark);box-shadow:0 0 0 3px #ffd24d2a}.removeMark{background:linear-gradient(180deg,#b88a1f,#6f5610);border-color:#4a3a07}.cell.mark:after{content:"âœŽ";position:absolute;right:6px;top:5px;font-size:13px;color:var(--mark)}.markDigit{position:relative;z-index:1;color:var(--markDigit);font-weight:900;font-size:clamp(14px,2.6vw,22px);text-shadow:0 1px 0 #0009}.sel{outline:3px solid var(--accent)!important;outline-offset:-2px;z-index:2}.bad{animation:shake .2s linear}@keyframes shake{0%{transform:translate(0)}25%{transform:translate(-2px)}50%{transform:translate(2px)}75%{transform:translate(-1px)}to{transform:translate(0)}}.panel{background:var(--panel);border-radius:12px;padding:12px;box-shadow:0 6px 24px #0008;align-self:start}.panel h3{margin:0 0 8px;font-size:14px;color:var(--muted)}.panel--aside{width:100%;max-width:340px}.numpad{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}.numpad button{padding:10px 0;font-size:16px;font-weight:900}.row{display:flex;gap:8px;margin-top:8px;align-items:center;flex-wrap:wrap}.row--hint{margin-top:10px}.row--config{margin-top:12px;flex-direction:column;align-items:stretch}.confirm{background:linear-gradient(180deg,#2b7,#194);border-color:#0a2}.flagModeOn{background:linear-gradient(180deg,#ff6b9a,#a33558);outline:2px solid var(--flag);box-shadow:0 0 0 3px #ff5e941f}.removeFlag{background:linear-gradient(180deg,#c44,#822);border-color:#500}.cell.postHiddenSafe{background:#1d2a30!important;color:#9bd3ff}.cell.postHiddenClue{background:#1f2933!important;color:var(--clue);box-shadow:inset 0 0 0 1px #6fc8ff33}.cell.postHiddenBomb{background:#3b1f28!important;outline:2px dashed #ff4b6ea6}.cell.flagRight{box-shadow:0 0 0 2px #41d38a99 inset}.cell.flagWrong{box-shadow:0 0 0 2px #ff6b6b99 inset}.cell.flagDigitWrong .flagDigit{text-decoration:line-through;filter:saturate(.6) brightness(.9)}.cell.flagDigitNoteOnBomb .flagDigit{opacity:.7}.rowHints,.colHints{position:absolute;inset:0;pointer-events:none;font-weight:800;font-size:12px;color:var(--muted);text-shadow:0 1px 0 #000;z-index:5}.gutRow,.gutCol{display:inline-flex;align-items:center;gap:6px;white-space:nowrap;line-height:1;padding:2px 8px;pointer-events:auto}.gutRow{position:absolute;left:8px;transform:translateY(-50%);padding:2px 6px;background:var(--gutBg);border:1px solid #0008;border-radius:8px;box-shadow:0 2px 8px #0008,inset 0 0 0 1px #ffffff12;cursor:default}.gutCol{position:absolute;top:8px;transform:translate(-50%);padding:2px 6px;background:var(--gutBg);border:1px solid #0008;border-radius:8px;box-shadow:0 2px 8px #0008,inset 0 0 0 1px #ffffff12;cursor:default}.hlStripe{position:absolute;z-index:6;pointer-events:none;display:none;border-radius:6px;box-shadow:inset 0 0 0 2px #ffffff14}#rowHL{background:color-mix(in oklab,var(--bombHL) 22%,transparent);outline:2px solid color-mix(in oklab,var(--bombHL) 45%,transparent)}#colHL{background:color-mix(in oklab,var(--bombHL) 18%,transparent);outline:2px solid color-mix(in oklab,var(--bombHL) 40%,transparent)}details.block{background:var(--panel);border-radius:12px;padding:10px 12px;box-shadow:0 6px 24px #0008;width:min(96vw,980px)}details.block>summary{cursor:pointer;outline:none;list-style:none;font-weight:800;color:var(--accent)}.cfggrid{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));margin-top:10px}.cfgitem{background:var(--cfgItemBg);border:1px solid #0008;border-radius:10px;padding:10px}.cfgitem h4{margin:0 0 6px;font-size:13px;color:var(--muted)}.cfgitem input[type=range]{width:100%}.cfgitem .val{font-weight:800}.switch{display:flex;gap:8px;align-items:center}.kv{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:12px;color:#cfe;background:var(--kvBg);padding:8px;border-radius:8px;white-space:pre-wrap;border:1px solid #0008}.inlineHelp{color:var(--muted);font-size:12px;margin-top:6px}.legend{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}.legend__clue{color:var(--clue);font-weight:800}.tileDemo{width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:8px;font-weight:900;font-size:18px;position:relative}.demo-covered{background:var(--tile2)}.demo-normal{background:var(--tile3);outline:1px solid #0006}.demo-clue{background:var(--tile3);color:var(--clue);outline:2px solid #3a7aa6aa;box-shadow:inset 0 0 0 1px #6fc8ff33,0 0 6px #6fc8ff33}.demo-flag{background:var(--tile2)}.demo-flag:before{content:"âš‘";position:absolute;left:4px;top:2px;color:var(--flag);font-size:12px}.demo-flag .digit{color:var(--flagDigit)}.demo-bomb{background:linear-gradient(180deg,#311a22,#2a1a1f);outline:2px solid #ff4b6e80}.demo-bomb:after{content:"ðŸ’£";font-size:18px}@media(max-width:720px){.layout{grid-template-columns:1fr}.panel--aside{max-width:none;width:100%}.status{margin-bottom:6px}.boardWrap{padding-top:42px;padding-left:48px}.cell{font-size:clamp(18px,6vw,28px)}}.cell.preview{animation:flicker .9s ease-in-out infinite alternate}.cell.preview .preview__digit,.cell.preview .preview__note{opacity:.65;filter:brightness(1.05)}.preview__flagIcon{position:absolute;top:5px;right:6px;font-size:14px;color:var(--flag);opacity:.65}.cell.sel{outline:3px solid var(--accent)!important;outline-offset:-2px;box-shadow:inset 0 0 0 2px var(--accent),0 0 8px var(--accent);z-index:10;position:relative}@keyframes flicker{0%{filter:brightness(1);transform:translateY(0)}to{filter:brightness(1.1);transform:translateY(-.5px)}}.cell.entered{background:linear-gradient(180deg,var(--enteredBg1),var(--enteredBg2));box-shadow:inset 0 0 0 2px #ffffff1a,0 0 0 1px #0006;cursor:pointer}.cell.entered.wrong{background:linear-gradient(180deg,var(--enteredWrongBg1),var(--enteredWrongBg2));box-shadow:inset 0 0 0 2px #ff6b6b66}.cell.entered.covered:hover,.cell.entered.sel{box-shadow:inset 0 0 0 2px var(--accent),0 0 0 1px #0006;filter:brightness(1.06)}.cell.entered.preview .preview__digit{opacity:.75}.preview__noteIcon{position:absolute;top:5px;right:6px;font-size:13px;color:var(--mark);opacity:.75}.seedRow{display:flex;align-items:center;gap:6px;font-size:12px;color:var(--muted)}.seedRow input{background:#131621;border:1px solid #303646;border-radius:4px;padding:2px 6px;color:var(--ink);font-size:11px;min-width:120px}.bombDigitOverlay{position:absolute;right:4px;top:2px;font-size:16px;font-weight:700;color:var(--muted);text-shadow:0 2px 3px #000;opacity:.9}.correctDigitOverlay{position:absolute;right:4px;top:2px;font-size:16px;font-weight:700;color:var(--ok);text-shadow:0 2px 3px #000;opacity:.9;pointer-events:none}.correctDigitOverlay.wrong{color:var(--danger)}.enteredWrong{position:relative;color:var(--danger)!important}.enteredWrong:after{content:"âœ–";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-size:26px;font-weight:900;color:var(--danger);opacity:.85;pointer-events:none}:root[data-theme=light] .cell.mark{box-shadow:inset 0 0 0 2px #eab308bf}:root[data-theme=light] .cell.mark:after{color:#a16207}:root[data-theme=light] .markDigit{color:#92400e;font-weight:900;text-shadow:0 0 2px rgba(255,255,255,.9)}:root[data-theme=light] .cell.given{background:linear-gradient(180deg,#ead7b3,#d3b887);color:#5b4630;font-weight:700;box-shadow:inset 0 0 0 1px #5a4b2a59,0 0 2px #0000000f}:root[data-theme=light] .cell.entered{background:#fff!important;color:#2c2c2c;font-weight:900;box-shadow:inset 0 0 0 2px #785528d9,0 0 4px #78552859}:root[data-theme=light] .cell.entered.sel,:root[data-theme=light] .cell.entered:hover{box-shadow:inset 0 0 0 2px #2563eb,0 0 6px #2563eb8c}:root[data-theme=light] .cell.clue.revealed{background:linear-gradient(180deg,#dce8fb,#c9dbf8);color:#1e40af;outline:2px solid #3b82f6aa;box-shadow:inset 0 0 0 2px #93c5fd88,0 0 8px #60a5fa55;font-weight:900}:root[data-theme=light] .cell.normal.revealed{background:linear-gradient(180deg,#f1e6d3,#e6d6bd);outline:1px solid #bfa98a}:root[data-theme=light] .cell.flag{box-shadow:inset 0 0 0 3px #dc2626e6,0 0 6px #dc262666}:root[data-theme=light] .gutRow,:root[data-theme=light] .gutCol{background:#fff4d6;color:#7a3b00;border-color:#78552866;box-shadow:0 2px 6px #00000014,inset 0 0 0 2px #f0b44640;font-weight:800;letter-spacing:.02em}:root[data-theme=light] .rowHints,:root[data-theme=light] .colHints{text-shadow:none}:root[data-theme=light] .seedRow input{background:#fff7e6;border:1px solid #c7a878;color:#3a2a18;box-shadow:0 1px 3px #0000001a}:root[data-theme=light] .kv{background:#fff3d9;color:#5c3b17;border-color:#966e3266}.cell.covered.clue{outline:2px solid #3a7aa6aa;box-shadow:inset 0 0 0 1px #6fc8ff33}.status.loading:after{content:"";display:inline-block;width:12px;height:12px;margin-left:8px;border:2px solid var(--accent);border-top-color:transparent;border-radius:50%;animation:spin .6s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}
