<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>SudoBOOM ‚Äì Sudoku √ó Minesweeper</title>
    <meta
      name="description"
      content="A strategic puzzle game combining Sudoku logic with Minesweeper deduction"
    />
    <link rel="icon" type="image/svg+xml" href="/favicon.ico" />

    <!-- Open Graph tags -->
    <meta property="og:title" content="SudoBOOM - Sudoku √ó Minesweeper" />
    <meta
      property="og:description"
      content="Challenge your logic with this unique puzzle mashup!"
    />
    <meta property="og:type" content="website" />
    <script type="module" crossorigin src="/assets/index-BxYEOSIs.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-D68lftLS.css">
  </head>

  <body>
    <!-- üéÆ Top Control Bar -->
    <div class="topbar">
      <div class="topbar__left">
        <h1 class="game-title">SudoBOOM</h1>
        <div class="stats">
          <span class="stat-item">
            <span class="stat-label">Bombs:</span>
            <b id="bombsLeft">--</b>
          </span>
          <span class="stat-separator">‚Ä¢</span>
          <span class="stat-item">
            <span class="stat-label">Flags:</span>
            <b id="flagsCnt">0</b>
          </span>
        </div>
      </div>

      <div class="topbar__center">
        <div class="seed-controls">
          <label class="seed-label">Seed:</label>
          <span id="seedDisplay" class="seed-display">‚Äî</span>
          <input
            id="seedInput"
            type="text"
            class="seed-input"
            placeholder="random"
            autocomplete="off"
          />
        </div>
      </div>

      <div class="topbar__right">
        <select id="mode" class="mode-select" title="Game Mode">
          <option value="story">Story</option>
          <option value="normal">Normal</option>
          <option value="hard">Hard</option>
          <option value="custom">Custom‚Ä¶</option>
        </select>

        <button
          id="themeToggle"
          class="btn btn--icon"
          aria-label="Toggle light/dark theme"
          title="Toggle Theme"
        >
          ‚òÄÔ∏è
        </button>

        <button id="newRun" class="btn btn--primary">New Run</button>

        <button id="reviewBtn" class="btn btn--secondary" style="display: none">
          üëÅ Review
        </button>
      </div>
    </div>

    <!-- üìò Tutorial/Guide - RIGHT AFTER TOPBAR -->
    <details class="block block--guide" id="guide">
      <summary>üìò How to Play & Tutorial</summary>
      <div class="guide__content">
        <!-- Introduction -->
        <section class="guide__section">
          <h3>üéÆ Welcome to SudoBOOM!</h3>
          <p>
            SudoBOOM is a unique puzzle game that combines the logical deduction
            of
            <strong>Sudoku</strong> with the strategic thinking of
            <strong>Minesweeper</strong>. You'll use Sudoku rules to narrow down
            possibilities while using Minesweeper-style clues to identify hidden
            bombs. Every cell matters, and every clue is a piece of the puzzle!
          </p>
          <p>
            This isn't just Sudoku with bombs‚Äîit's a whole new challenge that
            rewards careful thinking and pattern recognition. Ready to dive in?
          </p>
        </section>

        <!-- Understanding the Tiles -->
        <section class="guide__section">
          <h3>üî≤ Understanding the Tiles</h3>

          <div class="guide__tiles">
            <div class="guide__tile-item">
              <div class="tileDemo demo-given">
                <span>5</span>
              </div>
              <div class="guide__tile-desc">
                <strong>Starting Tiles (Given)</strong>
                <p>
                  Pre-filled and locked. These are your anchor points‚Äîthey can't
                  be changed or selected.
                </p>
              </div>
            </div>

            <div class="guide__tile-item">
              <div class="tileDemo demo-clue">
                <span>3</span>
              </div>
              <div class="guide__tile-desc">
                <strong>Clue Tiles (Teal Border)</strong>
                <p>
                  Special safe tiles where the
                  <strong>digit equals the number of bombs</strong>
                  in the 8 surrounding neighbors. These are your Minesweeper
                  clues!
                </p>
                <small class="guide__example">
                  Example: If you see a "3", exactly 3 of its 8 neighbors are
                  bombs.
                </small>
              </div>
            </div>

            <div class="guide__tile-item">
              <div class="tileDemo demo-covered"></div>
              <div class="guide__tile-desc">
                <strong>Editable Tiles (Hidden)</strong>
                <p>Covered tiles you need to solve. These can be:</p>
                <ul>
                  <li><strong>Safe digits</strong> ‚Äì Normal Sudoku cells</li>
                  <li>
                    <strong>Hidden clue tiles</strong> ‚Äì Clues you discover
                    (shown with teal border when revealed)
                  </li>
                  <li>
                    <strong>Bombs</strong> ‚Äì Dangerous! Must be flagged, not
                    revealed
                  </li>
                </ul>
              </div>
            </div>

            <div class="guide__tile-item">
              <div class="tileDemo demo-flag">
                <span class="digit">7</span>
              </div>
              <div class="guide__tile-desc">
                <strong>Flagged Tiles</strong>
                <p>
                  Mark suspected bombs with flags. You
                  <strong>must write the correct Sudoku digit</strong>
                  on each flag to win! Flags don't cost lives if you're
                  wrong‚Äîonly revealing bombs does.
                </p>
              </div>
            </div>

            <div class="guide__tile-item">
              <div class="tileDemo demo-note">
                <span class="markDigit">2/3</span>
              </div>
              <div class="guide__tile-desc">
                <strong>Note Tiles (Yellow)</strong>
                <p>
                  Use notes to track possibilities. Write "2/3/5" to remember
                  which digits could go in this cell. Notes are just for
                  you‚Äîthey don't affect the game.
                </p>
              </div>
            </div>

            <div class="guide__tile-item">
              <div class="tileDemo demo-bomb"></div>
              <div class="guide__tile-desc">
                <strong>Bomb Tiles</strong>
                <p>
                  Revealed bombs mean instant loss! Use clues and Sudoku logic
                  to identify and <strong>flag</strong> them before you
                  accidentally reveal one.
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- Game Modes & Controls -->
        <section class="guide__section">
          <h3>üéõÔ∏è Controls & Interaction</h3>

          <div class="guide__modes">
            <div class="guide__mode-item">
              <h4>üî¢ Number Mode (Default)</h4>
              <ol>
                <li>Click a tile to select it (blue border)</li>
                <li>Click a number (1-9) on the numpad</li>
                <li>
                  Click <strong>Confirm</strong> to reveal the tile with that
                  digit
                </li>
              </ol>
              <div class="guide__warning">
                ‚ö†Ô∏è <strong>Warning:</strong> If you reveal a bomb, you lose
                instantly!<br />
                Wrong digits on safe tiles won't end the game, but they won't
                help you win either.
              </div>
            </div>

            <div class="guide__mode-item">
              <h4>‚öë Flag Mode</h4>
              <ol>
                <li>Click <strong>‚öë Flag</strong> button to enter flag mode</li>
                <li>Select a tile you think is a bomb</li>
                <li>Pick the Sudoku digit that belongs in that cell (1-9)</li>
                <li>Click <strong>Confirm</strong> to place the flag</li>
              </ol>
              <p>
                <strong>Why digit matters:</strong> To win, you must correctly
                flag all bombs <em>with their correct Sudoku digits</em>. Use
                Sudoku logic to deduce what number the bomb would be!
              </p>
              <small
                >üí° Tip: You can place a blank flag (no digit) if you're not
                sure yet.</small
              >
            </div>

            <div class="guide__mode-item">
              <h4>‚úé Note Mode</h4>
              <ol>
                <li>Click <strong>‚úé Mark</strong> button to enter note mode</li>
                <li>Select a tile</li>
                <li>Click numbers and "/" to compose notes (e.g., "2/3/7")</li>
                <li>Click <strong>Confirm</strong> to save the note</li>
              </ol>
              <p>
                Use notes to track candidate digits or to mark cells you're
                analyzing.
              </p>
            </div>
          </div>

          <div class="guide__shortcuts">
            <h4>‚å®Ô∏è Keyboard Shortcuts (Optional)</h4>
            <ul>
              <li><kbd>1</kbd>-<kbd>9</kbd> ‚Äì Pick digit</li>
              <li><kbd>Enter</kbd> or <kbd>Space</kbd> ‚Äì Confirm</li>
              <li><kbd>F</kbd> ‚Äì Toggle Flag mode</li>
              <li><kbd>M</kbd> ‚Äì Toggle Mark (Note) mode</li>
              <li><kbd>Arrows</kbd> ‚Äì Navigate cells</li>
              <li><kbd>Esc</kbd> ‚Äì Unselect tile</li>
              <li><kbd>Delete</kbd> ‚Äì Remove flag/note</li>
            </ul>
          </div>
        </section>

        <!-- Row/Column Hints -->
        <section class="guide__section">
          <h3>üí£ Row & Column Hints</h3>
          <p>
            Look for <strong>üí£ [number]</strong> badges on the left and top of
            the board. These show how many bombs are in that entire row or
            column.
          </p>

          <div class="guide__example-box">
            <strong>Example:</strong> If a row shows "üí£ 2", exactly 2 cells in
            that row are bombs. <br /><br />
            <strong>Strategy:</strong>
            <ul>
              <li>
                If you've flagged 2 bombs in a row that shows "üí£ 2", all other
                cells in that row are safe!
              </li>
              <li>
                If a row has only 2 unknown cells and shows "üí£ 2", both must be
                bombs.
              </li>
              <li>
                Combine this with Sudoku logic to narrow down bomb locations.
              </li>
            </ul>
          </div>

          <p>
            Hover over the row/col badges to highlight that line. Use them to
            cross-reference with clue tiles for powerful deductions!
          </p>
        </section>

        <!-- Win & Lose Conditions -->
        <section class="guide__section">
          <h3>üèÜ Win & Lose Conditions</h3>

          <div class="guide__conditions">
            <div class="guide__condition guide__condition--win">
              <h4>‚úÖ You Win When:</h4>
              <ol>
                <li>
                  <strong>All safe tiles</strong> are revealed with correct
                  digits (following Sudoku rules)
                </li>
                <li><strong>All bombs</strong> are flagged</li>
                <li>
                  <strong>Each flag</strong> has the correct Sudoku digit
                  written on it
                </li>
              </ol>
              <p class="guide__tip">
                üí° <strong>Key Insight:</strong> You can't just randomly flag
                everything‚Äîyou must solve the Sudoku to know what digit each
                bomb would have been!
              </p>
            </div>

            <div class="guide__condition guide__condition--lose">
              <h4>‚ùå You Lose If:</h4>
              <ul>
                <li>You reveal a bomb tile in Number mode (instant loss)</li>
              </ul>
              <p class="guide__note">
                üìù <strong>Note:</strong> Wrong digits on safe tiles won't end
                the game immediately, but they'll prevent you from winning.
                Flags are safe‚Äîuse them liberally!
              </p>
            </div>
          </div>
        </section>

        <!-- Strategy Tips -->
        <section class="guide__section">
          <h3>üß† Strategy Tips</h3>
          <ul class="guide__tips">
            <li>
              <strong>Start with clue tiles:</strong> Revealed clues (teal
              border) are your safest starting points.
            </li>
            <li>
              <strong>Use Sudoku logic first:</strong> Narrow down which digits
              can go where using rows/columns/blocks.
            </li>
            <li>
              <strong>Cross-reference clues:</strong> If two clue tiles share
              neighbors, compare their counts.
            </li>
            <li>
              <strong>Flag early, flag often:</strong> It's safer to flag a
              suspected bomb than to guess and reveal it.
            </li>
            <li>
              <strong>Use notes liberally:</strong> Track candidate digits for
              complex cells.
            </li>
            <li>
              <strong>Check row/col totals:</strong> If you've found all bombs
              in a row, the rest are safe!
            </li>
            <li>
              <strong>Hidden clues are gold:</strong> When you reveal a tile
              that turns out to be a clue (teal border), it instantly tells you
              about 8 neighbors.
            </li>
          </ul>
        </section>

        <!-- Visual Legend -->
        <section class="guide__section">
          <h3>üé® Visual Legend</h3>
          <div class="legend">
            <div class="tileDemo demo-covered" title="Covered tile"></div>
            <div class="tileDemo demo-normal" title="Revealed normal digit">
              <span>5</span>
            </div>
            <div class="tileDemo demo-clue" title="Revealed clue digit (teal)">
              <span>3</span>
            </div>
            <div class="tileDemo demo-flag" title="Flag with digit">
              <span class="digit">7</span>
            </div>
            <div class="tileDemo demo-note" title="Note tile">
              <span class="markDigit">2/3</span>
            </div>
            <div class="tileDemo demo-bomb" title="Revealed bomb"></div>
            <div class="tileDemo demo-given" title="Starting given tile">
              <span>8</span>
            </div>
          </div>
        </section>
      </div>
    </details>

    <!-- Lives indicator (hidden for now) -->
    <div class="lives" id="lives" style="display: none"></div>

    <!-- Main game layout -->
    <div class="layout">
      <!-- Status bar -->
      <div id="status" class="status">
        Welcome! Select a mode and click "New Run" to start playing.
      </div>

      <!-- Board wrapper -->
      <div class="boardWrap">
        <div
          id="board"
          class="board"
          role="grid"
          aria-label="Sudoku Minesweeper board"
        ></div>

        <!-- Gutters for on-board hints -->
        <div id="rowHintsOverlay" class="rowHints"></div>
        <div id="colHintsOverlay" class="colHints"></div>
      </div>

      <!-- Control panel -->
      <aside class="panel panel--aside">
        <h3>Number Pad</h3>
        <div class="numpad" id="numpad"></div>

        <div class="control-buttons">
          <button id="confirm" class="btn btn--confirm" title="Confirm action">
            Confirm
          </button>
          <button id="flagBtn" class="btn btn--flag" title="Toggle flag mode">
            ‚öë Flag
          </button>
          <button id="markBtn" class="btn btn--mark" title="Toggle mark mode">
            ‚úé Mark
          </button>
        </div>

        <div class="control-buttons control-buttons--remove">
          <button
            id="removeFlagBtn"
            class="btn btn--remove"
            title="Remove flag"
            disabled
          >
            ‚úñ Remove Flag
          </button>
          <button
            id="removeMarkBtn"
            class="btn btn--remove"
            title="Remove mark"
            disabled
          >
            ‚úñ Remove Mark
          </button>
        </div>

        <div class="hint-text">
          <small id="asideHint" class="hint">
            Select a tile and pick a number to start playing.
          </small>
        </div>

        <details class="config-details">
          <summary>‚öôÔ∏è Active Config</summary>
          <div id="activeConfig" class="kv"></div>
        </details>
      </aside>
    </div>

    <!-- Config Panel -->
    <details class="block block--config" id="configPanel">
      <summary>‚öôÔ∏è Configure Mode (Custom unlocks inputs)</summary>
      <div class="cfggrid">
        <div class="cfgitem">
          <h4>Lives: <span class="val" id="valLives">3</span></h4>
          <input
            type="range"
            id="cfgLives"
            min="1"
            max="7"
            step="1"
            value="3"
          />
        </div>
        <div class="cfgitem">
          <h4>Bomb Ratio: <span class="val" id="valBombRatio">0.13</span></h4>
          <input
            type="range"
            id="cfgBombRatio"
            min="0.08"
            max="0.30"
            step="0.01"
            value="0.13"
          />
          <div class="inlineHelp">
            % of cells that are bombs (0.13 ‚âà 10‚Äì12 bombs).
          </div>
        </div>
        <div class="cfgitem">
          <h4>
            Start Clues Target: <span class="val" id="valStartClues">26</span>
          </h4>
          <input
            type="range"
            id="cfgStartClues"
            min="6"
            max="45"
            step="1"
            value="26"
          />
          <div class="inlineHelp">
            Minimum count of clue tiles shown at start.
          </div>
        </div>
        <div class="cfgitem">
          <h4>
            Start Givens (Total):
            <span class="val" id="valStartGivens">52</span>
          </h4>
          <input
            type="range"
            id="cfgStartGivens"
            min="10"
            max="65"
            step="1"
            value="52"
          />
          <div class="inlineHelp">
            Total tiles revealed at start (clues &amp; normals; never bombs).
          </div>
        </div>
        <div class="cfgitem">
          <h4>Max Adj for Start: <span class="val" id="valMaxAdj">2</span></h4>
          <input
            type="range"
            id="cfgMaxAdj"
            min="0"
            max="8"
            step="1"
            value="2"
          />
          <div class="inlineHelp">
            Prefer clues with ‚â§ this many adjacent bombs.
          </div>
        </div>
        <div class="cfgitem switch">
          <input type="checkbox" id="cfgSpreadRows" checked />
          <label for="cfgSpreadRows">Spread by Rows</label>
        </div>
        <div class="cfgitem switch">
          <input type="checkbox" id="cfgSpreadBlocks" checked />
          <label for="cfgSpreadBlocks">Spread by Blocks</label>
        </div>
        <div class="cfgitem">
          <button id="saveCustom">üíæ Save Custom</button>
          <button id="resetCustom">‚Ü∫ Reset Custom</button>
        </div>
      </div>
    </details>

  </body>
</html>
